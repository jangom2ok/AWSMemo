## アカウントの作成

### コンソールからユーザ作成方法
rootアカウントからIAMユーザ作成までの手順をメモ。

#### ユーザ作成権限のあるアカウントでログインする
基本的には最初に作成したrootアカウントで大丈夫です。

1. アカウント名が表示されている項目から【セキュリティ認証情報】を選択する。
1. 左側の項目から【ユーザ】を選択する。
1. 【ユーザの追加】を選択する。
1. 【ユーザ名】を入力する。
1. aws cliなどで作成するユーザを使用する場合は、【プログラムによるアクセス】にチェックを入れる。（これにチェックを入れると【アクセスキーID】と【シークレットアクセスキー】が発行されます。）
1. コンソールなどで作成するユーザを使用する場合は、【AWS マネジメントコンソールへのアクセス】にチェックを入れる。
1. グループの設定※
1. グループを作成する場合は【グループ名】と【付与したいポリシー（アクセス権限）】を選択しグループを作成する。
1. タグの入力が可能なので必要に応じて入力する。（特に記入すべき事項が無い場合は空白でも可です。）
1. 最後に作成するユーザの情報に間違いがなければユーザの作成をクリック。
1. お疲れ様でした。以上でIAMユーザの作成は完了です。

※グループとポリシーの概念さえ理解できていれば特に迷うことは無さそうです。ユーザに適用するグループを求められるので既に適用したいグループがある場合は既存のグループにチェックを入れ、新しくグループを作成するには【グループ作成】を選択する。
簡単に説明するとグループとはアクセス権限の集合体で、複数のポリシー（アクセス権限）が１つになったものと理解しておけば大丈夫です。


### aws cliを使用したIAMユーザ作成手順

#### 事前準備
作成したIAMユーザに適用するグループを作成しておく（グループはコンソールで作成したほうが楽）。下記のコマンドでも作成可能。

```
aws iam create-group --group-name グループ名
```

#### IAMユーザの作成
```
aws iam create-user --user-name ユーザ名
```

#### IAMユーザにパスワードを設定する
```
aws iam create-login-profile --user-name ユーザ名 --password パスワード
```

#### IAMユーザにグループを適用する
```
aws iam add-user-to-group --group-name グループ名 --user-name ユーザ名
```

#### IAMユーザのアクセスキーとシークレットキーを発行する
```
aws iam create-access-key --user-name ユーザ名 --profile プロフィール名
```

実行後に表示されるアクセスキーとシークレットキーを控えておく。



※`--profile`オプションで作成しておいたプロフィールにアタッチできる。[参考リンク](https://qiita.com/maimai-swap/items/749642b54160443e6a1f)

